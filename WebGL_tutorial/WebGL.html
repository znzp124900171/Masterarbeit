<!DOCTYPE html>
<html>
<head>
	<title>WebGL Demo</title>
    <script src="gl-matrix.js" type="text/javascript"></script>
    <script id="shader-fs" type="x-shader/x-fragment">
	    precision mediump float;

	    uniform sampler2D uSampler;
	    uniform vec3 lightPosition;

	    varying float varColor;
	    varying vec3 varNormal;
	    varying vec3 varPostion;
	    varying vec3 vLighting;

	    const vec3 specColor = vec3(1.0,1.0,1.0);
	    void main(void) {
	    	highp vec4 texelColor = texture2D(uSampler, vec2(varColor,0.0));
	        gl_FragColor = vec4(texelColor.rbg*vLighting, texelColor.a);
	    }
	</script>

	<script id="shader-vs" type="x-shader/x-vertex">
		attribute vec3 aVertexNormal;
	    attribute vec3 aVertexPosition;
	    attribute float color;

	    uniform mat4 uNormalMatrix;
	    uniform mat4 uMVMatrix;
	    uniform mat4 uPMatrix;

	    varying float varColor;
	    varying vec3 varNormal;
	    varying vec3  vLighting;

	    void main(void) {
	        gl_Position = uPMatrix * uMVMatrix * vec4(aVertexPosition, 1.0);
	        varColor = color;

	        // Apply lighting effect
	        vec3 ambientLight = vec3(0.6,0.6,0.6);
	        vec3 directionalLightColor = vec3(0.5,0.5,0.75);
	        vec3 directionalVector = vec3(0.85,0.8,.075);

	        vec4 transformedNormal = uNormalMatrix*vec4(aVertexNormal,1.0);

	        float directional = max(dot(transformedNormal.xyz,directionalVector),0.0);
	        vLighting = ambientLight + (directionalLightColor*directional);
	    }
	</script>
	<script src="WebGL.js" type="text/javascript"></script>
</head>
<body onload="webGLStart();">
	<canvas id="glcanvas" width="640" height="480"></canvas>
</body>
</html>